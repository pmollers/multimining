# INTRO
  I from Russia and know English very poorly therefore all descriptions will be in Russian so far.

# Зачем?
  На текущий момент я знаю несколько монет, которые почти никто не майнит, но которые есть на биржах и имеют неплохой курс. Некоторые монеты имеют низкую сложность сети и добывать их не составляет труда. Есть формула для расчета средней прибыльности майнинга, имея свою скорость, сложность сети и курс валюты, получаем профит в сутки. На текущий момент есть валюты, которые приносят профит в $11 на старом ASIC Antminer S5 со скоростью 1TH/S. С учетом стоимости такого асика на Авито 3-4 Круб., окупаемость очень хорошая. Уверен, что есть подобные монеты и на других алгоритмах, т.е. можно с одной видеокарты получать большие суммы, нежели на основных пуллах.

# Как?
  Есть желание поднять мульти пулл или скрипт, который будет анализировать прибыльность большого списка монет, разные алгоритмы, перенаправлять майнер на нужный порт и монету, тем самым всегда работая на самых профитных монетах. Количество монет должно быть очень большим, включая и уже давно заброшенные монеты, но имеющиеся на биржах. В идеале, что бы происходил автоматический обмен монет на бирже, дабы не потерять курс во время майнинга.
  Подобные реализации есть, тот же Nicehash. Ребята просто молодцы, сделали очень хорошее и простое в использовании приложение, нажал кнопку и забыл, все само работает, деньги капают. Я так понял от курса валют прибыль у них не зависит, а работает исключительно на внутренние заказы по продаже мощностей, т.е. если заказы просядут, просядет и профит. Но будем надеяться, что у них все будет ОК! Удачи ребятам!

# Что требуется?
* прямые руки, знание языков программирования, опыт, время.
* сервер для кошельков, стартума и оболочки.
* база данных валют.
* скрипт переключения валют.

# Что есть?
* руки есть, не очень прямые, знаю PHP, SQL, HTML, CSS. Есть опыт работы, но он датируется 20 годами ранее, потому новые фишки мне не знакомы. Время есть, но по минимуму, на подготовку к написанию ушли две недели отпуска из четырех.
* сервер есть, Core i5, 2 ядра, 4 гига, 640 HDD. Для старта должно хватить, все зависит от будущей нагрузки, не уверен сколько одновременно работающих кошельков вытянет этот хлам.
* база данных mysql так же есть, но под переделку, по API сгружается все курсы раз в 5 минут, думаю что все грузить не нужно, а только имеющиеся, потому нужно будет переделывать под требования.
* вот тут сложнее, не совсем понятно как реализовать, есть мысль шелл скриптом перезапускать стратум с переназначением порта, но не уверен, что это правильное решение. Можно попробовать проксировать, а в прокси уже переназначать. Оставил на последок.

# С помощью чего?
  Потратив 2 недели на изучение, были найдены готовые проекты, они так или иначе не подходят под изначальные требования, но их части можно использовать для своих нужд:
  # Веб морды, порталы, фронт:
  * [MPOS](https://github.com/MPOS) - Портал, только фронт, на PHP, не обновлялся 2 года. Ребята проделали огромную работу и забросили проект. Не понял как реализовать мульти пулл, но реализация есть у https://miningpoolhub.com/ В футере значится некий [TheSerapher](https://github.com/TheSerapher/). На его странице найден [mpos-development-kit](https://github.com/TheSerapher/mpos-development-kit) там и стратум, и сам MPOS и много чего еще, нужно поизучать.
  * [yiimp](https://github.com/tpruvot/yiimp) - Мегакрутой портал от разработчика ccminer, есть почти все, что нужно по функционалу, обновляется плохо и редко, но исходный пулл на нем работает и очень хорошо http://yiimp.ccminer.org/ Форк от [yaamp](https://github.com/globalzon/yaamp). Есть мультипулл, язый PHP. Сложно добавить новый обменник. Есть авто обмен валюты. Есть стратум.
  # Стратумы, бэк:
  * [CoiniumServ](https://github.com/bonesoul/CoiniumServ) - Стратум с веб мордой, кросс платформенный, компилится на раз, есть своя вебморда, мудьтвалютный, проверка валюты по биржам. Очень хороший, но добавление всего нового через перекомпилирование. Не переключает валюты. Не обновлялся 3 месяца, на вопросы не отвечают.
  * Есть много других бэков, пробовал, но пока остановился на первом.
  # Blockchain explorer:
  * [iquidus](https://github.com/iquidus/explorer) - красивый, функциональный, грузит биржи очень подробно, но очень долго индексирует в базу блоки, 50 000 блоков около 2 часов. Даже захудалые монеты от 500 000 блоков, ждать до Китайской пасхи. Нет поддержки мульти нод, я так понял придется поднимать по несколько копий для запуска нескольких эксплоеров, очень большая нагрузка будет.
  * [abe](https://github.com/bitcoin-abe/bitcoin-abe) - не ставил, не тестил, заморочки с конфигами, видел реализации, я так понял поддерживает несколько монет сразу в работе, по скорости индекса не знаю, нужно протестировать с запуском нескольких монет, функционал хуже первого. UPD. Поставил abe. Конфиг замудренный, но не сложный, за час проиндексировал 500 000 блоков. Скорость хорошая по сравнению с иквидусом. Жду запуска веб морды.
  * [spectra](https://github.com/SpecDevelopment/spectra) - найден вчера. Реализация очень крутая, не уверен, что в гите выложен весь код, т.к. гит не популярен, да и по файлам много чего не хватает, нужно тестить. http://www.fuzzbawls.pw/explorerlist.php
  * Блок эксплоер нужен лишь для получения информации о скорости сети и, самое главное, сложности валюты, т.к. она нужна для просчета профита. С другой стороны, это можно реализовать и простым запросом к кошельку. На будущее, эксплоер все равно потребуется, для фронта при условии наличия пользователей на пулле + наличие работающего эксплоера - это трафик на пулл. На начальной стадии можно обойтись и без этого.
  
# Приступим?
  Я примерно понимаю будущую нагрузку на сервер, с учетом количества будущих нод (запущенных кошельков) и количества соединений + постоянное обновление бирж. Нагрузку можно снизить путем написания кода с помощью современных фреймворков, которые я не знаю. Потому, сразу отмел использование php и прочих посредников. Буду использовать возможности операционки напрямую, а это повод изучить bash и shell скрипты.
  Первым делом, решено использовать крон для обновлений. Сейчас базу валют с бирж тянет php по крону, грузит в mysql. Убираем php путем написания простого скрипта. Проверено на импорте сложности валюты в базу mysql. Файл [test.sh](https://github.com/foxer666/multimining/blob/master/test.sh) Сложность грузится в базу простым скриптом, пока решен вопрос с блокэксплоером.
  
  
  
  
